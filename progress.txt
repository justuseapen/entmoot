# Ralph Progress Log
Started: Mon Jan 12 17:13:26 EST 2026

## Codebase Patterns
- FeedbackReport model already supports `nps` and `quick_feedback` report types
- Use `context_data` JSONB field to store additional metadata (score, feature name, rating)
- React contexts must be in separate files to avoid fast-refresh lint errors
- ProactiveFeedbackProvider wraps the app and manages NPS, feature, and session feedback state
- Hooks in `/hooks/useProactiveFeedback.ts` provide convenient triggers for feedback components
- Landing page design system colors: forestGreen #2D5A27, leafGreen #7CB342, skyBlue #64B5F6, warmGold #FFD54F, earthBrown #795548, creamWhite #FFF8E7, sunsetOrange #FF7043, darkForest #1B3A1A
- Landing page components go in `/frontend/src/components/landing/`
---

## 2026-01-12 17:30 - US-046 Proactive Feedback Collection
- What was implemented:
  - Backend: Added `last_nps_prompt_date` to users table
  - Backend: Created ProactiveFeedbackService with NPS eligibility logic (30 days active, quarterly max)
  - Backend: Added 3 new endpoints: /feedback/eligibility, /feedback/dismiss_nps, /feedback/nps_follow_up
  - Backend: Auto-records NPS/feature feedback when feedback is submitted
  - Frontend: NPSSurvey component (0-10 scale with follow-up questions by category)
  - Frontend: FeatureFeedback component (thumbs up/down with optional expansion)
  - Frontend: SessionFeedback component (emoji scale 1-5)
  - Frontend: ProactiveFeedbackProvider context and hooks

- Files changed:
  - backend/db/migrate/20260112221500_add_last_nps_prompt_date_to_users.rb
  - backend/app/services/proactive_feedback_service.rb
  - backend/app/controllers/api/v1/feedback_controller.rb
  - backend/config/routes.rb
  - backend/spec/services/proactive_feedback_service_spec.rb
  - backend/spec/requests/api/v1/feedback_spec.rb
  - frontend/src/lib/feedback.ts
  - frontend/src/hooks/useFeedback.ts
  - frontend/src/hooks/useProactiveFeedback.ts
  - frontend/src/contexts/ProactiveFeedbackContext.ts
  - frontend/src/components/NPSSurvey.tsx
  - frontend/src/components/FeatureFeedback.tsx
  - frontend/src/components/SessionFeedback.tsx
  - frontend/src/components/ProactiveFeedbackProvider.tsx

- **Learnings for future iterations:**
  - React contexts MUST be in separate files from components to avoid fast-refresh lint errors
  - FeedbackReport model already has nps and quick_feedback types - just use them
  - Use `context_data` JSONB to store score, follow_up, feature, rating metadata
  - NPS category logic: 9-10 = promoter, 7-8 = passive, 0-6 = detractor
  - ProactiveFeedbackService.should_show_nps? checks: 30 days old, has activity, not prompted in 90 days
  - localStorage used as immediate fallback for feedback state, synced to server
---

## 2026-01-12 - US-047 Landing Page Route and Structure
- What was implemented:
  - Created LandingPage component at /frontend/src/pages/LandingPage.tsx
  - Updated App.tsx routing to render LandingPage at / for unauthenticated users
  - Authenticated users at / are redirected to /dashboard via Navigate component
  - Applied cream white background color (#FFF8E7) from design system
  - Created /frontend/src/components/landing/ directory for future landing components
  - Implemented responsive layout with mobile, tablet, desktop breakpoints

- Files changed:
  - frontend/src/pages/LandingPage.tsx (new)
  - frontend/src/App.tsx (updated route and import)

- **Learnings for future iterations:**
  - Landing page design system colors defined in prd.json under `landingPageDesignSystem`
  - LandingPage includes internal redirect logic for authenticated users
  - The landing components directory is empty - future stories (US-048 through US-060) will add components there
  - Responsive breakpoints: sm: 640px, lg: 1024px (Tailwind defaults)
  - Home.tsx is no longer used but wasn't deleted - can be removed later if needed
---

## 2026-01-12 17:30 - US-048 Landing Page Navigation Bar
- What was implemented:
  - Created LandingNav component at /frontend/src/components/landing/LandingNav.tsx
  - TreePine logo icon with "Entmoot" text as navigation brand
  - Desktop navigation links: Features, How It Works, Pricing (smooth scroll to sections)
  - Sign In link (text link to /login) and Get Started CTA button (forest green, links to /register)
  - Sticky header with transparent background over hero, solid cream white (#FFF8E7) on scroll
  - Mobile hamburger menu with slide-out drawer using shadcn/ui Sheet component
  - Smooth scroll functionality via scrollIntoView({ behavior: "smooth" })
  - Added placeholder sections with IDs (#features, #how-it-works, #pricing) for scroll targets
  - Added pt-24 padding to hero section to account for fixed navbar height

- Files changed:
  - frontend/src/components/landing/LandingNav.tsx (new)
  - frontend/src/pages/LandingPage.tsx (updated to include LandingNav and placeholder sections)

- **Learnings for future iterations:**
  - Use useState for scroll position tracking with window.scrollY > 50 threshold
  - Sheet component from shadcn/ui works well for mobile drawer navigation
  - Placeholder sections with IDs allow smooth scroll to work before full section implementations
  - Fixed navbar requires padding-top on first content section to prevent overlap
  - Landing page colors are duplicated between LandingNav and LandingPage - consider extracting to shared constants
---

## 2026-01-12 - US-049 Landing Page Hero Section
- What was implemented:
  - Created HeroSection component at /frontend/src/components/landing/HeroSection.tsx
  - Dawn to sky blue gradient background (pink -> peach -> sky blue)
  - Blocky forest silhouette at bottom using SVG BlockyTree components (Minecraft-inspired)
  - Floating island decorative elements with CSS keyframe animation
  - Headline: "Build Your Family's Adventure, One Goal at a Time"
  - Subheadline about transforming chaotic days into epic quests
  - Primary CTA: "Start Your Free Adventure" (forest green button with Star icon)
  - Secondary CTA: "Watch Demo" (outlined button with Play icon)
  - Trust badges: "No credit card required • Free for families up to 5"
  - Full viewport height on desktop, responsive on mobile
  - Updated LandingPage.tsx to use HeroSection component

- Files changed:
  - frontend/src/components/landing/HeroSection.tsx (new)
  - frontend/src/pages/LandingPage.tsx (updated to use HeroSection)

- **Learnings for future iterations:**
  - Each landing component should define its own LANDING_COLORS constant (or extract to shared module)
  - CSS keyframes can be embedded in style tags within React components
  - animate-float class uses 4s ease-in-out infinite animation for smooth floating effect
  - BlockyTree SVG uses stacked rectangles for Minecraft-style pixelated look
  - FloatingIsland components use absolute positioning and hidden on smaller screens (lg:block)
  - Hero section needs pb-32 to leave room for forest silhouette overlay
---

## 2026-01-12 - US-050 Landing Page Social Proof Bar
- What was implemented:
  - Created SocialProofBar component at /frontend/src/components/landing/SocialProofBar.tsx
  - Horizontal bar with soft green gradient background (leafGreen 25% -> forestGreen 20%)
  - Stats: "2,847 Families Adventuring" with TreePine icon in circular background
  - Star rating: "4.9/5" with 5 filled Star icons and "from 500+ reviews" text
  - Featured quote: "Finally, a planning app my kids actually WANT to use!" — Sarah M., Mom of 3
  - Responsive layout: horizontal on desktop/tablet, stacks vertically on mobile
  - Animated count-up effect using custom useCountUp hook with Intersection Observer
  - Count-up uses ease-out cubic easing for smooth deceleration

- Files changed:
  - frontend/src/components/landing/SocialProofBar.tsx (new)
  - frontend/src/pages/LandingPage.tsx (added SocialProofBar import and usage)

- **Learnings for future iterations:**
  - useCountUp hook pattern: track visibility with IntersectionObserver, animate with requestAnimationFrame
  - tabular-nums CSS class ensures consistent number width during count animation
  - Intersection Observer threshold of 0.3 works well for triggering animations when section scrolls into view
  - Quote component uses rotated Quote icon (rotate-180) for opening quote style
  - StarRating component fills stars based on rating value (fullStars + hasHalfStar logic)
---
